"use strict";(()=>{var e={};e.id=649,e.ids=[649],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},6005:e=>{e.exports=require("node:crypto")},45218:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>O,originalPathname:()=>v,requestAsyncStorage:()=>g,routeModule:()=>U,serverHooks:()=>f,staticGenerationAsyncStorage:()=>R,staticGenerationBailout:()=>P});var a={};r.r(a),r.d(a,{GET:()=>q,POST:()=>q}),r(95655);var i=r(83323),n=r(54647),s=r(69143),o=r(48291),u=r(92801);let d=u.rN.create(),c=d.middleware,p=c(async e=>{let{getUser:t}=(0,o.Gs)(),r=t();if(!r||!r.id)throw new u.bR({code:"UNAUTHORIZED"});return e.next({ctx:{userId:r.id,user:r}})}),l=d.router,w=d.procedure,m=d.procedure.use(p);var x=r(96578),b=r(45952);let h=l({authCallback:w.query(async()=>{let{getUser:e}=(0,o.Gs)(),t=e();if(!t.id||!t.email)throw new u.bR({code:"UNAUTHORIZED"});let r=await x.db.user.findFirst({where:{id:t.id}});return r||await x.db.user.create({data:{id:t.id,email:t.email,joinedOn:new Date}}),{success:!0}}),getUserStreak:m.query(async({ctx:e})=>{let{userId:t,user:r}=e;return await x.db.streak.findMany()}),getUserPoints:m.query(async({ctx:e})=>{let{userId:t,user:r}=e;if(!t)throw new u.bR({code:"UNAUTHORIZED"});return await x.db.user.findUnique({where:{id:t}})}),populateDb:m.input(b.z.object({minutes:b.z.number()})).mutation(async({ctx:e,input:t})=>{let{userId:r}=e,{minutes:a}=t;if(!r)throw new u.bR({code:"UNAUTHORIZED"});let i=await x.db.user.findUnique({where:{id:r}});if(!i)throw new u.bR({code:"NOT_FOUND"});let n=i.netPoints+(a>120?30:-30);await x.db.user.update({where:{id:r},data:{netPoints:n}});let s=await x.db.streak.create({data:{minutes:a,goalReached:a>120}});return s})}),q=e=>(0,s.w)({endpoint:"/api/trpc",req:e,router:h,createContext:()=>({})}),y=i.AppRouteRouteModule,U=new y({definition:{kind:n.x.APP_ROUTE,page:"/api/trpc/[trpc]/route",pathname:"/api/trpc/[trpc]",filename:"route",bundlePath:"app/api/trpc/[trpc]/route"},resolvedPagePath:"/Users/nike/Documents/SOFTWARE/CEN3031-Group-Project/nextJs/src/app/api/trpc/[trpc]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:R,serverHooks:f,headerHooks:O,staticGenerationBailout:P}=U,v="/api/trpc/[trpc]/route"},96578:(e,t,r)=>{let a;r.d(t,{db:()=>n});let i=require("@prisma/client");a=new i.PrismaClient;let n=a}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[691,727,406],()=>r(45218));module.exports=a})();